<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!DOCTYPE html&gt;</p>
<p class="p1">&lt;html lang="cs"&gt;</p>
<p class="p1">&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;title&gt;Kubistický slicer&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script type="text/javascript" src="https://unpkg.com/paper"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>html, body {</p>
<p class="p1"><span class="Apple-converted-space">      </span>margin: 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>padding: 0;</p>
<p class="p1"><span class="Apple-converted-space">      </span>overflow: hidden;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #f3f2ef;</p>
<p class="p1"><span class="Apple-converted-space">      </span>height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>canvas {</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">      </span>height: 100%;</p>
<p class="p1"><span class="Apple-converted-space">      </span>touch-action: none;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/style&gt;</p>
<p class="p1">&lt;/head&gt;</p>
<p class="p1">&lt;body&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;canvas id="canvas" resize&gt;&lt;/canvas&gt;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script type="text/paperscript" canvas="canvas"&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>// Vytvoření základního polygonu (kubistický "blok")</p>
<p class="p1"><span class="Apple-converted-space">    </span>var shape = new Path.RegularPolygon(new Point(view.center), 6, 200);</p>
<p class="p1"><span class="Apple-converted-space">    </span>shape.fillColor = '#d6b88d';</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>var isDrawing = false;</p>
<p class="p1"><span class="Apple-converted-space">    </span>var slicerPath;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function onMouseDown(event) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>isDrawing = true;</p>
<p class="p1"><span class="Apple-converted-space">      </span>slicerPath = new Path({</p>
<p class="p1"><span class="Apple-converted-space">        </span>strokeColor: 'black',</p>
<p class="p1"><span class="Apple-converted-space">        </span>strokeWidth: 2</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p1"><span class="Apple-converted-space">      </span>slicerPath.add(event.point);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function onMouseDrag(event) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (isDrawing) slicerPath.add(event.point);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function onMouseUp(event) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!isDrawing) return;</p>
<p class="p1"><span class="Apple-converted-space">      </span>isDrawing = false;</p>
<p class="p1"><span class="Apple-converted-space">      </span>slicerPath.add(event.point);</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>try {</p>
<p class="p1"><span class="Apple-converted-space">        </span>var splitShapes = shape.divide(slicerPath);</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (splitShapes) {</p>
<p class="p1"><span class="Apple-converted-space">          </span>// Rozlož obě části o kousek od sebe</p>
<p class="p1"><span class="Apple-converted-space">          </span>splitShapes.children[0].fillColor = randomColor();</p>
<p class="p1"><span class="Apple-converted-space">          </span>splitShapes.children[1].fillColor = randomColor();</p>
<p class="p1"><span class="Apple-converted-space">          </span>splitShapes.children[0].position.x -= 10;</p>
<p class="p1"><span class="Apple-converted-space">          </span>splitShapes.children[1].position.x += 10;</p>
<p class="p1"><span class="Apple-converted-space">          </span>shape.remove(); // původní tvar pryč</p>
<p class="p1"><span class="Apple-converted-space">          </span>shape = new Group(splitShapes.children);</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>} catch (e) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>console.log('Nešlo rozdělit tvar:', e);</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">      </span>slicerPath.remove();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function randomColor() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>var palette = ['#d6b88d', '#b8a47d', '#9a8b72', '#7a6b60', '#594b45'];</p>
<p class="p1"><span class="Apple-converted-space">      </span>return palette[Math.floor(Math.random() * palette.length)];</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/script&gt;</p>
<p class="p1">&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
